# .github/workflows/ci.yml # ELIS – CI # # Jobs: #   quality : Ruff (lint) + Black (check) #   tests   : pytest (runs toy-agent smoke test) #   validate: repository validator (tolerates non-zero exit), depends on quality+tests # # Triggers: #   - pull_request → main #   - manual (workflow_dispatch)  name: ELIS - CI  on:   pull_request:     branches: [main]   workflow_dispatch: {}  permissions:   contents: read  jobs:   quality:     name: quality     runs-on: ubuntu-latest     steps:       - name: Checkout         uses: actions/checkout@v4         with:           fetch-depth: 0        - name: Set up Python         uses: actions/setup-python@v5         with:           python-version: "3.11"        - name: Install tools         run: |           python -m pip install --upgrade pip           pip install ruff==0.6.4 black==24.8.0        - name: Ruff (lint)         run: ruff check .        - name: Black (check)         run: black --check .    tests:     name: tests     runs-on: ubuntu-latest     needs: quality     steps:       - name: Checkout         uses: actions/checkout@v4         with:           fetch-depth: 0        - name: Set up Python         uses: actions/setup-python@v5         with:           python-version: "3.11"        - name: Install test deps         run: |           python -m pip install --upgrade pip           pip install pytest==8.3.3        - name: Run tests         run: pytest -q    validate:     name: validate     runs-on: ubuntu-latest     needs: [quality, tests]     steps:       - name: Checkout         uses: actions/checkout@v4         with:           fetch-depth: 0        - name: Set up Python         uses: actions/setup-python@v5         with:           python-version: "3.11"        - name: Run validator (non-blocking)         run: python scripts/validate_json.py || echo "::warning ::validator returned non-zero"
